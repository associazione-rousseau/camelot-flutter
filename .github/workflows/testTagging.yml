on:
  push:
    branches:
      - testTagging
name: Tag commit
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: '0'
    - name: Bump version and push tag
      id: buildname
      uses: anothrNick/github-tag-action@1.26.0
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        WITH_V: false
        RELEASE_BRANCHES: testTagging
        INITIAL_VERSION: 1.1.0
        DEFAULT_BUMP: patch
    - name: Generate build number
      id: buildnumber
      uses: einaregilsson/build-number@v2 
      with:
        token: ${{secrets.github_token}}   

    - name: Print values
      run: echo $BUILD_NUMBER && echo $BUILD_NAME && echo "ciao"
      env:
        BUILD_NUMBER: ${{ steps.buildnumber.outputs.build_number }}
        BUILD_NAME: ${{ steps.buildname.outputs.new_tag }}  
